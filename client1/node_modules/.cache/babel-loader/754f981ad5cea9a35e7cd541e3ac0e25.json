{"ast":null,"code":"'use strict';\n\nvar RingBuffer = function (bufferSize) {\n  this._bufferSize = bufferSize;\n  this.clear();\n};\n\nRingBuffer.prototype.clear = function () {\n  this._buffer = new Array(this._bufferSize);\n  this._ringOffset = 0;\n  this._ringSize = this._bufferSize;\n  this._head = 0;\n  this._tail = 0;\n  this.length = 0;\n};\n\nRingBuffer.prototype.push = function (value) {\n  var expandBuffer = false,\n      expandRing = false;\n\n  if (this._ringSize < this._bufferSize) {\n    expandBuffer = this._tail === 0;\n  } else if (this._ringOffset === this._ringSize) {\n    expandBuffer = true;\n    expandRing = this._tail === 0;\n  }\n\n  if (expandBuffer) {\n    this._tail = this._bufferSize;\n    this._buffer = this._buffer.concat(new Array(this._bufferSize));\n    this._bufferSize = this._buffer.length;\n    if (expandRing) this._ringSize = this._bufferSize;\n  }\n\n  this._buffer[this._tail] = value;\n  this.length += 1;\n  if (this._tail < this._ringSize) this._ringOffset += 1;\n  this._tail = (this._tail + 1) % this._bufferSize;\n};\n\nRingBuffer.prototype.peek = function () {\n  if (this.length === 0) return void 0;\n  return this._buffer[this._head];\n};\n\nRingBuffer.prototype.shift = function () {\n  if (this.length === 0) return void 0;\n  var value = this._buffer[this._head];\n  this._buffer[this._head] = void 0;\n  this.length -= 1;\n  this._ringOffset -= 1;\n\n  if (this._ringOffset === 0 && this.length > 0) {\n    this._head = this._ringSize;\n    this._ringOffset = this.length;\n    this._ringSize = this._bufferSize;\n  } else {\n    this._head = (this._head + 1) % this._ringSize;\n  }\n\n  return value;\n};\n\nmodule.exports = RingBuffer;","map":{"version":3,"names":["RingBuffer","bufferSize","_bufferSize","clear","prototype","_buffer","Array","_ringOffset","_ringSize","_head","_tail","length","push","value","expandBuffer","expandRing","concat","peek","shift","module","exports"],"sources":["/home/faisal/ServerExample/client/client/node_modules/websocket-extensions/lib/pipeline/ring_buffer.js"],"sourcesContent":["'use strict';\n\nvar RingBuffer = function(bufferSize) {\n  this._bufferSize = bufferSize;\n  this.clear();\n};\n\nRingBuffer.prototype.clear = function() {\n  this._buffer     = new Array(this._bufferSize);\n  this._ringOffset = 0;\n  this._ringSize   = this._bufferSize;\n  this._head       = 0;\n  this._tail       = 0;\n  this.length      = 0;\n};\n\nRingBuffer.prototype.push = function(value) {\n  var expandBuffer = false,\n      expandRing   = false;\n\n  if (this._ringSize < this._bufferSize) {\n    expandBuffer = (this._tail === 0);\n  } else if (this._ringOffset === this._ringSize) {\n    expandBuffer = true;\n    expandRing   = (this._tail === 0);\n  }\n\n  if (expandBuffer) {\n    this._tail       = this._bufferSize;\n    this._buffer     = this._buffer.concat(new Array(this._bufferSize));\n    this._bufferSize = this._buffer.length;\n\n    if (expandRing)\n      this._ringSize = this._bufferSize;\n  }\n\n  this._buffer[this._tail] = value;\n  this.length += 1;\n  if (this._tail < this._ringSize) this._ringOffset += 1;\n  this._tail = (this._tail + 1) % this._bufferSize;\n};\n\nRingBuffer.prototype.peek = function() {\n  if (this.length === 0) return void 0;\n  return this._buffer[this._head];\n};\n\nRingBuffer.prototype.shift = function() {\n  if (this.length === 0) return void 0;\n\n  var value = this._buffer[this._head];\n  this._buffer[this._head] = void 0;\n  this.length -= 1;\n  this._ringOffset -= 1;\n\n  if (this._ringOffset === 0 && this.length > 0) {\n    this._head       = this._ringSize;\n    this._ringOffset = this.length;\n    this._ringSize   = this._bufferSize;\n  } else {\n    this._head = (this._head + 1) % this._ringSize;\n  }\n  return value;\n};\n\nmodule.exports = RingBuffer;\n"],"mappings":"AAAA;;AAEA,IAAIA,UAAU,GAAG,UAASC,UAAT,EAAqB;EACpC,KAAKC,WAAL,GAAmBD,UAAnB;EACA,KAAKE,KAAL;AACD,CAHD;;AAKAH,UAAU,CAACI,SAAX,CAAqBD,KAArB,GAA6B,YAAW;EACtC,KAAKE,OAAL,GAAmB,IAAIC,KAAJ,CAAU,KAAKJ,WAAf,CAAnB;EACA,KAAKK,WAAL,GAAmB,CAAnB;EACA,KAAKC,SAAL,GAAmB,KAAKN,WAAxB;EACA,KAAKO,KAAL,GAAmB,CAAnB;EACA,KAAKC,KAAL,GAAmB,CAAnB;EACA,KAAKC,MAAL,GAAmB,CAAnB;AACD,CAPD;;AASAX,UAAU,CAACI,SAAX,CAAqBQ,IAArB,GAA4B,UAASC,KAAT,EAAgB;EAC1C,IAAIC,YAAY,GAAG,KAAnB;EAAA,IACIC,UAAU,GAAK,KADnB;;EAGA,IAAI,KAAKP,SAAL,GAAiB,KAAKN,WAA1B,EAAuC;IACrCY,YAAY,GAAI,KAAKJ,KAAL,KAAe,CAA/B;EACD,CAFD,MAEO,IAAI,KAAKH,WAAL,KAAqB,KAAKC,SAA9B,EAAyC;IAC9CM,YAAY,GAAG,IAAf;IACAC,UAAU,GAAM,KAAKL,KAAL,KAAe,CAA/B;EACD;;EAED,IAAII,YAAJ,EAAkB;IAChB,KAAKJ,KAAL,GAAmB,KAAKR,WAAxB;IACA,KAAKG,OAAL,GAAmB,KAAKA,OAAL,CAAaW,MAAb,CAAoB,IAAIV,KAAJ,CAAU,KAAKJ,WAAf,CAApB,CAAnB;IACA,KAAKA,WAAL,GAAmB,KAAKG,OAAL,CAAaM,MAAhC;IAEA,IAAII,UAAJ,EACE,KAAKP,SAAL,GAAiB,KAAKN,WAAtB;EACH;;EAED,KAAKG,OAAL,CAAa,KAAKK,KAAlB,IAA2BG,KAA3B;EACA,KAAKF,MAAL,IAAe,CAAf;EACA,IAAI,KAAKD,KAAL,GAAa,KAAKF,SAAtB,EAAiC,KAAKD,WAAL,IAAoB,CAApB;EACjC,KAAKG,KAAL,GAAa,CAAC,KAAKA,KAAL,GAAa,CAAd,IAAmB,KAAKR,WAArC;AACD,CAxBD;;AA0BAF,UAAU,CAACI,SAAX,CAAqBa,IAArB,GAA4B,YAAW;EACrC,IAAI,KAAKN,MAAL,KAAgB,CAApB,EAAuB,OAAO,KAAK,CAAZ;EACvB,OAAO,KAAKN,OAAL,CAAa,KAAKI,KAAlB,CAAP;AACD,CAHD;;AAKAT,UAAU,CAACI,SAAX,CAAqBc,KAArB,GAA6B,YAAW;EACtC,IAAI,KAAKP,MAAL,KAAgB,CAApB,EAAuB,OAAO,KAAK,CAAZ;EAEvB,IAAIE,KAAK,GAAG,KAAKR,OAAL,CAAa,KAAKI,KAAlB,CAAZ;EACA,KAAKJ,OAAL,CAAa,KAAKI,KAAlB,IAA2B,KAAK,CAAhC;EACA,KAAKE,MAAL,IAAe,CAAf;EACA,KAAKJ,WAAL,IAAoB,CAApB;;EAEA,IAAI,KAAKA,WAAL,KAAqB,CAArB,IAA0B,KAAKI,MAAL,GAAc,CAA5C,EAA+C;IAC7C,KAAKF,KAAL,GAAmB,KAAKD,SAAxB;IACA,KAAKD,WAAL,GAAmB,KAAKI,MAAxB;IACA,KAAKH,SAAL,GAAmB,KAAKN,WAAxB;EACD,CAJD,MAIO;IACL,KAAKO,KAAL,GAAa,CAAC,KAAKA,KAAL,GAAa,CAAd,IAAmB,KAAKD,SAArC;EACD;;EACD,OAAOK,KAAP;AACD,CAhBD;;AAkBAM,MAAM,CAACC,OAAP,GAAiBpB,UAAjB"},"metadata":{},"sourceType":"script"}
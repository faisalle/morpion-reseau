{"ast":null,"code":"// Generated by CoffeeScript 1.12.7\n(function () {\n  var EventSourceReceiver,\n      transport,\n      utils,\n      extend = function (child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      hasProp = {}.hasOwnProperty;\n\n  utils = require('./utils');\n  transport = require('./transport');\n\n  EventSourceReceiver = function (superClass) {\n    extend(EventSourceReceiver, superClass);\n\n    function EventSourceReceiver() {\n      return EventSourceReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    EventSourceReceiver.prototype.protocol = \"eventsource\";\n\n    EventSourceReceiver.prototype.doSendFrame = function (payload) {\n      var data;\n      data = ['data: ', utils.escape_selected(payload, '\\r\\n\\x00'), '\\r\\n\\r\\n'];\n      return EventSourceReceiver.__super__.doSendFrame.call(this, data.join(''));\n    };\n\n    return EventSourceReceiver;\n  }(transport.ResponseReceiver);\n\n  exports.app = {\n    eventsource: function (req, res) {\n      var headers, origin;\n\n      if (!req.headers['origin'] || req.headers['origin'] === 'null') {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n\n      res.setHeader('Content-Type', 'text/event-stream');\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n\n      res.writeHead(200);\n      res.write('\\r\\n');\n      transport.register(req, this, new EventSourceReceiver(req, res, this.options));\n      return true;\n    }\n  };\n}).call(this);","map":{"version":3,"names":["EventSourceReceiver","transport","utils","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","superClass","apply","arguments","protocol","doSendFrame","payload","data","escape_selected","join","ResponseReceiver","exports","app","eventsource","req","res","headers","origin","setHeader","writeHead","write","register","options"],"sources":["/home/faisal/ServerExample/client/client/node_modules/sockjs/lib/trans-eventsource.js"],"sourcesContent":["// Generated by CoffeeScript 1.12.7\n(function() {\n  var EventSourceReceiver, transport, utils,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  utils = require('./utils');\n\n  transport = require('./transport');\n\n  EventSourceReceiver = (function(superClass) {\n    extend(EventSourceReceiver, superClass);\n\n    function EventSourceReceiver() {\n      return EventSourceReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    EventSourceReceiver.prototype.protocol = \"eventsource\";\n\n    EventSourceReceiver.prototype.doSendFrame = function(payload) {\n      var data;\n      data = ['data: ', utils.escape_selected(payload, '\\r\\n\\x00'), '\\r\\n\\r\\n'];\n      return EventSourceReceiver.__super__.doSendFrame.call(this, data.join(''));\n    };\n\n    return EventSourceReceiver;\n\n  })(transport.ResponseReceiver);\n\n  exports.app = {\n    eventsource: function(req, res) {\n      var headers, origin;\n      if (!req.headers['origin'] || req.headers['origin'] === 'null') {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n      res.setHeader('Content-Type', 'text/event-stream');\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n      res.writeHead(200);\n      res.write('\\r\\n');\n      transport.register(req, this, new EventSourceReceiver(req, res, this.options));\n      return true;\n    }\n  };\n\n}).call(this);\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}